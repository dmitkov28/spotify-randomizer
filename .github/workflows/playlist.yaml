name: Playlist Workflow

on:
   workflow_dispatch:

jobs:
    create-playlist:
        runs-on: ubuntu-latest
        steps:
            - name: Checkout repository
              uses: actions/checkout@v4

            - name: Build image
              run: docker build -t spotify .

            - name: Create playlist
              run: |
                docker run --rm \
                  -e SPOTIFY_USER_ID="${{ secrets.SPOTIFY_USER_ID }}" \
                  -e SPOTIFY_CLIENT_ID="${{ secrets.SPOTIFY_CLIENT_ID }}" \
                  -e SPOTIFY_CLIENT_SECRET="${{ secrets.SPOTIFY_CLIENT_SECRET }}" \
                  -e SPOTIFY_USER_ACCESS_TOKEN="${{ secrets.SPOTIFY_USER_ACCESS_TOKEN }}" \
                  -e SPOTIFY_USER_REFRESH_TOKEN="${{ secrets.SPOTIFY_USER_REFRESH_TOKEN }}" \
                  spotify